Whiskers("modules.stream",{code:function(t,e,i){"use strict";var s=this;return s.b(i=i||""),s.b('<div class="bound '),s.b(s.v(s.f("type",t,e,0))),s.b(" "),s.b(s.v(s.f("entity_type",t,e,0))),s.s(s.f("singleRow",t,e,1),t,e,0,56,67,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" single-row")}),t.pop()),s.s(s.f("enablePeek",t,e,1),t,e,0,96,104,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" peeking")}),t.pop()),s.b('"> '),s.s(s.f("header_data",t,e,1),t,e,0,138,156,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<module_header0",t,e,""))}),t.pop()),s.b(" "),s.s(s.d("filter_labels.length",t,e,1),t,e,0,198,612,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' <ul class="filter-labels '),i.s(i.f("filter_alignment",t,e,1),t,e,0,245,282,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("filter-alignment-"),i.b(i.v(i.f("filter_alignment",t,e,0)))}),t.pop()),i.b('" role="tabpanel"> '),i.s(i.f("filter_labels",t,e,1),t,e,0,340,484,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(' <li class="filter-label '),i.s(i.f("active_filter",t,e,1),t,e,0,383,396,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("active-filter")}),t.pop()),i.b('" tabindex="0"> <div class="filter-label-text"> '),i.b(i.v(i.f("text",t,e,0))),i.b(" </div> </li> ")}),t.pop()),i.b(" </ul> "),i.s(i.f("active_filter_title",t,e,1),t,e,0,533,587,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('<h3 class="filter-header">'),i.b(i.v(i.f("active_filter_title",t,e,0))),i.b("</h3>")}),t.pop()),i.b(" ")}),t.pop()),s.b(" "),s.b(s.t(s.f("list",t,e,0))),s.b(" "),s.b(" "),s.s(s.f("paginated_items",t,e,1),t,e,0,737,746,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<item1",t,e,""))}),t.pop()),s.b(" "),s.b(s.rp("<partials/pagination_links2",t,e,"")),s.b(' <div class="show_more_container"> <div class="bottom-peek"></div> <button class="show_more blue button large ada-el-focus"> <span class="label">'),s.b(s.v(s.d("translations.show_more",t,e,0))),s.b('</span> <span class="spinner"></span> </button> </div> </div>'),s.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<item1":{name:"item",partials:{},subs:{}},"<partials/pagination_links2":{name:"partials/pagination_links",partials:{},subs:{}}},subs:{}}),function(t){"use strict";var e=t.Disney,i=e.placeSwap=function(t,e){if(!e)return function(e){e&&i(t,e)};e.render(),t.$("#"+e.cid).replaceWith(e.el)};e.placeHtml=function(t){return t?'<div id="'+t.cid+'"></div>':null}}(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dayjs=e()}(this,function(){"use strict";var t="millisecond",e="second",i="minute",s="hour",n="day",r="week",a="month",o="quarter",l="year",d="date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,u=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,e,i){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(i)+t},f={s:c,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),s=Math.floor(i/60),n=i%60;return(e<=0?"+":"-")+c(s,2,"0")+":"+c(n,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var s=12*(i.year()-e.year())+(i.month()-e.month()),n=e.clone().add(s,a),r=i-n<0,o=e.clone().add(s+(r?-1:1),a);return+(-(s+(i-n)/(r?n-o:o-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:a,y:l,w:r,d:n,D:d,h:s,m:i,s:e,ms:t,Q:o}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},_="en",p={};p[_]=m;var g=function(t){return t instanceof w},v=function(t,e,i){var s;if(!t)return _;if("string"==typeof t)p[t]&&(s=t),e&&(p[t]=e,s=t);else{var n=t.name;p[n]=t,s=n}return!i&&s&&(_=s),s||!i&&_},b=function(t,e){if(g(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new w(i)},y=f;y.l=v,y.i=g,y.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var w=function(){function c(t){this.$L=this.$L||v(t.locale,null,!0),this.parse(t)}var f=c.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(h);if(s){var n=s[2]-1||0,r=(s[7]||"0").substring(0,3);return i?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(e)}(t),this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return y},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var i=b(t);return this.startOf(e)<=i&&i<=this.endOf(e)},f.isAfter=function(t,e){return b(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<b(t)},f.$g=function(t,e,i){return y.u(t)?this[e]:this.set(i,t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,o){var h=this,u=!!y.u(o)||o,c=y.p(t),f=function(t,e){var i=y.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return u?i:i.endOf(n)},m=function(t,e){return y.w(h.toDate()[t].apply(h.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},_=this.$W,p=this.$M,g=this.$D,v="set"+(this.$u?"UTC":"");switch(c){case l:return u?f(1,0):f(31,11);case a:return u?f(1,p):f(0,p+1);case r:var b=this.$locale().weekStart||0,w=(_<b?_+7:_)-b;return f(u?g-w:g+(6-w),p);case n:case d:return m(v+"Hours",0);case s:return m(v+"Minutes",1);case i:return m(v+"Seconds",2);case e:return m(v+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(r,o){var h,u=y.p(r),c="set"+(this.$u?"UTC":""),f=(h={},h[n]=c+"Date",h[d]=c+"Date",h[a]=c+"Month",h[l]=c+"FullYear",h[s]=c+"Hours",h[i]=c+"Minutes",h[e]=c+"Seconds",h[t]=c+"Milliseconds",h)[u],m=u===n?this.$D+(o-this.$W):o;if(u===a||u===l){var _=this.clone().set(d,1);_.$d[f](m),_.init(),this.$d=_.set(d,Math.min(this.$D,_.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[y.p(t)]()},f.add=function(t,o){var d,h=this;t=Number(t);var u=y.p(o),c=function(e){var i=b(h);return y.w(i.date(i.date()+Math.round(e*t)),h)};if(u===a)return this.set(a,this.$M+t);if(u===l)return this.set(l,this.$y+t);if(u===n)return c(1);if(u===r)return c(7);var f=(d={},d[i]=6e4,d[s]=36e5,d[e]=1e3,d)[u]||1,m=this.$d.getTime()+t*f;return y.w(m,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var i=t||"YYYY-MM-DDTHH:mm:ssZ",s=y.z(this),n=this.$locale(),r=this.$H,a=this.$m,o=this.$M,l=n.weekdays,d=n.months,h=function(t,s,n,r){return t&&(t[s]||t(e,i))||n[s].substr(0,r)},c=function(t){return y.s(r%12||12,t,"0")},f=n.meridiem||function(t,e,i){var s=t<12?"AM":"PM";return i?s.toLowerCase():s},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:y.s(o+1,2,"0"),MMM:h(n.monthsShort,o,d,3),MMMM:h(d,o),D:this.$D,DD:y.s(this.$D,2,"0"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,l,2),ddd:h(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(r),HH:y.s(r,2,"0"),h:c(1),hh:c(2),a:f(r,a,!0),A:f(r,a,!1),m:String(a),mm:y.s(a,2,"0"),s:String(this.$s),ss:y.s(this.$s,2,"0"),SSS:y.s(this.$ms,3,"0"),Z:s};return i.replace(u,function(t,e){return e||m[t]||s.replace(":","")})},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,d,h){var u,c=y.p(d),f=b(t),m=6e4*(f.utcOffset()-this.utcOffset()),_=this-f,p=y.m(this,f);return p=(u={},u[l]=p/12,u[a]=p,u[o]=p/3,u[r]=(_-m)/6048e5,u[n]=(_-m)/864e5,u[s]=_/36e5,u[i]=_/6e4,u[e]=_/1e3,u)[c]||_,h?p:y.a(p)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return p[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),s=v(t,e,!0);return s&&(i.$L=s),i},f.clone=function(){return y.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},c}(),$=w.prototype;return b.prototype=$,[["$ms",t],["$s",e],["$m",i],["$H",s],["$W",n],["$M",a],["$y",l],["$D",d]].forEach(function(t){$[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),b.extend=function(t,e){return t(e,w,b),b},b.locale=v,b.isDayjs=g,b.unix=function(t){return b(1e3*t)},b.en=p[_],b.Ls=p,b}),function(t){"use strict";var e=function(e,i,s,n,r,a,o){var l=t.dayjs,d=i||{},h=s||{},u=d.streaming_now||"Streaming Now",c=d.streaming||"Streaming",f=d.on_blu_ray_dvd_digital||"On Blu-Ray, DVD, Digital",m=d.now_on_digital||"Now on Digital",_=d.on_digital||"On Digital",p=d.available_to_pre_order||"Available to Preorder",g=d.in_theaters_now||"In Theaters Now",v=d.in_theaters||"In Theaters",b=d.coming_soon||"Coming Soon",y=parseInt(h.coming_soon,10)||200,w=parseInt(h.available_to_preorder,10)||30,$=parseInt(h.on_digital,10)||15,M=parseInt(h.streaming,10)||14,S="MMMM D, YYYY",D=l(n,S),k=r?l(r,S):null,T=a?l(a,S):null,x=o?l(o,S):null;return l().isSame(T,"day")?u:l().isAfter(T)?u:l().add(M,"d").isAfter(T,"day")?c+" "+a:l().isSame(x,"day")?f:l().isSame(k,"day")?m:!l().isAfter(k)||x||T?l().isAfter(k)&&x&&l().isAfter(x)?f:l().add($,"d").isAfter(k)?_+" "+r:l().add(w,"d").isAfter(k)?p:l().isSame(D,"day")?g:l().isAfter(D)?g:D.isAfter(l())&&l().add(y,"d").isAfter(D)?v+" "+n:D.isAfter(l().add(200,"d"))?b:!n&&b:m};t.MovieDate={formatReleaseDate:e}}(this),Whiskers("modules.grid",{code:function(t,e,i){"use strict";var s=this;return s.b(i=i||""),s.b('<div class="bound '),s.b(s.v(s.f("type",t,e,0))),s.b(" "),s.b(s.v(s.f("entity_type",t,e,0))),s.s(s.f("singleRow",t,e,1),t,e,0,56,67,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" single-row")}),t.pop()),s.b('"> '),s.s(s.f("header_data",t,e,1),t,e,0,100,118,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<module_header0",t,e,""))}),t.pop()),s.b(' <div class="cols-'),s.b(s.v(s.f("rpp",t,e,0))),s.b(" "),s.b(s.v(s.f("layoutType",t,e,0))),s.b(' col-container"> '),s.s(s.f("visible_data",t,e,1),t,e,0,208,217,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<item1",t,e,""))}),t.pop()),s.b(" </div> </div>"),s.fl()},partials:{"<module_header0":{name:"module_header",partials:{},subs:{}},"<item1":{name:"item",partials:{},subs:{}}},subs:{}}),function(t){"use strict";var e=t.Disney,i=t.Grill,s=e.Style.breakpoints,n=t._,r=t.Backbone;e.GridModuleDimensions={cols:function(t,e){switch(t){case"poster":case"dvd_case":case"letter":case"baseball_card":return e>=s.max?5:e>=s.midHigh?3:e>=s.midLow?3:2;case"square":return e>=s.max?4:e>=s.midHigh?3:2;case"16x9":case"poster_landscape":return e>=s.midHigh?3:e>=s.midLow?2:1;case"widescreen":return e>=s.midHigh?2:1;case"4x3":return e>=s.max?4:e>=s.midHigh?3:e>=s.midLow?2:1;default:return e>=s.max?4:e>=s.midHigh?3:1}},rows:function(t){return t>=s.max?4:t>=s.midHigh?4:5}},i.GridModuleBaseView=i.ModuleView.extend({cols:function(){var t=r.Resize.width(),i=n.first(this.model.get("data")),a=i&&i.entity_config&&i.entity_config.aspect_ratio,o=this.model.get("style_options");if("object_collection"===(i&&i.entity_type)){var l=i&&i.items,d=l&&n.first(l),h=d&&d.entity_config,u=h&&h.aspect_ratio;u&&(a=u)}return o.items_per_row_override&&t<=s.midHigh?Math.min(o.items_per_row_override,2):o.items_per_row_override&&t>s.midHigh&&t<=s.max?Math.min(o.items_per_row_override,4):o.items_per_row_override&&t>s.max?o.items_per_row_override:e.GridModuleDimensions.cols(a,t)},rows:function(){var t=r.Resize.width();return e.GridModuleDimensions.rows(t)}})}(this),function(t){"use strict";var e=t.Grill,i=t.Disney,s=t.Whiskers,n=t._,r=i.Style.breakpoints,a=n.values(r),o=n.contains(["disneychannel.disney.com","disneyxd.disney.com"],i.portal),l=e.GridModuleBaseView.extend({breakpoints:a.join(" "),style_classes:["grid-view"],required_template_sets:["module_header","entities"],template:s.modules.grid,initialize:function(t){this.options=t||{};var e=this.model,i=e.data;this.entity_type=n.first(i.models).get("entity_type")||e.get("type")},render:function(){var t=this.cols(),e=this.model,i=e.data.models.slice(0,this.limit(t));this.model.set("visible_data",i);var s=n.extend({rpp:t,layoutType:t>1?"grid-layout":"list-layout",channelSite:o,entity_type:this.entity_type,singleRow:i.length<=t},this.model);this.$el.html(this.template.render(s,this.ctx_additions())),this.updateLinks(t)},limit:function(t){var e=this.model.get("type"),i=this.model.data.length;return"character"===e?i:i>t?i-i%t:i},updateLinks:function(t){var e=this.$el.children().find(".outer-link, .title-link");t<=1?e.attr("tabindex",-1):e.prop("tabindex",!1)}});l.register("browse",{}),l.register("recommended",{limit:function(t){return o?this.model.data.length:t}}),l.register("enchilada",{style_classes:["browse"],limit:function(){return this.model.data.length}})}(this),function(t){"use strict";function e(t){var e=t.map(function(t){return t.items||[]});return h.flatten(e)}function i(t,e,i,s){var n,r=t.map(function(t){var i=t.title,s=i===e;return s&&(n=e),{text:i,active_filter:s}});return i&&(r.unshift({text:s}),e!==s&&null!==e||(r[0].active_filter=!0)),{filter_labels:r,active_filter_title:n}}var s=t.Disney,n=t.Grill,r=t.MovieDate,a=t.Backbone,o=t.Whiskers,l=t.Math,d=t.$,h=t._,u=s.Style.breakpoints,c=h.values(u),f=t.window,m=s.Ads||{},_=m.ShareThroughAds;(t.StreamView=n.GridModuleBaseView.extend({style_classes:["stream-view","grid-view"],required_template_sets:["module_header","links"],template:o.modules.stream,breakpoints:c.join(" "),page:1,events:{"click .show_more":function(t){this.handleShowMoreAction(t)},"mousedown .filter-label":function(t){d(t.currentTarget).css("border-bottom","none")},"click .filter-label":function(t){this.handleFilterLabelAction(t)},"keydown .show_more":function(t){13===t.keyCode&&this.handleShowMoreKeyPress(t)},"keyup .filter-label":function(t){this.filterFocusIndex=d(t.target).index(),13===t.keyCode&&this.handleFilterLabelAction(t)}},initialize:function(t){this.options=t||{},this.filterFocusIndex=null;var n=this.model.get("data"),r=this,a=n,o=h.first(n),l=o&&o.type,d="object_collection"===l,u=this.model.get("config_options"),c=u&&u.enable_filters,f=u&&u.display_movie_release_date;if(d&&(this.model.set("count",a.length),c)){var m=u.include_show_all_filter_label,_=u.show_all_filter_label_text,p=u.default_show_all_selected_on_page_load,g=p?null:o.title;a=e(n.filter(function(t){return null===g||t.title===g}));var v=i(n,g,m,_);this.filter_labels=v.filter_labels,this.active_filter_title=v.active_filter_title}if(f){var b=this.model.data.models;d&&(b=a),b.forEach(function(t){r.setMovieRelease(t)})}"function"==typeof this.initModels&&this.initModels(),this.entity_type=h.chain(this.model.data.pluck("entity_type")).compact().uniq().first().value(),this.initNativeAds(),d?this.initCollection(a):this.initCollection(this.model.data.models),this.initRecommendations(),this.needsGuestContext()&&s.guest.retain()},renderFetchedData:function(t){this.recommenderInsertNativeAd(t),this.initCollection(t);var e=h.first(t)||{};this.entity_type=e.entity_type,this.makeList(),this.render(),this.ready(),this.$el.show(),this.$el.loadLazyImages(),this.adListeners(),this.refreshNativeAd(),d(".filter-label")[this.filterFocusIndex].focus()},render:function(){var t=this.list,e=this.model.get("config_options"),i=e&&e.filter_alignment,n=h.extend({entity_type:this.entity_type,list:s.placeHtml(t),enablePeek:this.model.get("enable_peek"),singleRow:this.count<=this.cols(),href_target:o.partials.href_target,filter_labels:this.filter_labels||[],active_filter_title:this.active_filter_title,filter_alignment:i},this.options.ads.helpers(this.model.toJSON(),this.getAdPosition()),this.model);this.$el.html(this.template.render(n,this.ctx_additions())),s.placeSwap(this,t)},ready:function(){this.list&&this.resize()},resize:function(){var t=this.el.querySelectorAll(".filter-label");if(t.length){var e=t[t.length-1],i=e&&e.getBoundingClientRect();i.top>=0&&i.left>=0&&i.right+60<=f.innerWidth?this.$(".filter-labels").css("overflow-x","hidden"):this.$(".filter-labels").css("overflow-x","scroll")}var s=this.cols(),n=this.layoutType(),r=l.floor((this.visibleThumbs.length-this.numPeeking())/this.rows()/s),a=this.entity_type;this.page=r>0?r:1,this.list&&this.list.$el.attr("class","col-container cols-"+s+" "+n),this.fit(),"articleauthor"===a&&this.entityResize()},destroy:function(){this.needsGuestContext()&&s.guest&&s.guest.release()},initCollection:function(t){this.allThumbs=h.unique(t,function(t){return t.id}),this.visibleThumbs=this.allThumbs.slice(0,this.desired()),this.thumbCollection=new a.Collection(this.visibleThumbs),this.count=this.allThumbs.length},setMovieRelease:function(t){var e=this,i=e.model.get("translations"),s=t.get?t.get("release"):t.release,n=t.get?t.get("title"):t.title,a=t.get?t.get("digital_released_on"):t.digital_released_on,o=t.get?t.get("streaming_released_on"):t.streaming_released_on,l=t.get?t.get("physical_released_on"):t.physical_released_on,d=h.extend(i,e.model.collection.translations),u=e.model.collection.movie_date_config,c=r.formatReleaseDate(n,d,u,s,a,o,l);t.get?t.set("movie_release_date_formatted",c):t.movie_release_date_formatted=c},makeList:function(){var t,e=this;e.shareThrough&&(t=e.options.ads.tagWithTargeting("native",{strnativekey:e.shareThrough.getPlacementKey(e.model)})),this.list=new n.ListView({collection:this.thumbCollection,template:{render:function(i){return h.extend(i,{adMarkup:t},{translations:e.model.get("translations"),isUgcImage:"ugcimage"===e.entity_type}),o.entities.item.render(i,e.global_components.entities)}}})},updateVisibleThumbs:function(){if(this.desired()>this.visibleThumbs.length){var t=this.allThumbs.slice(this.visibleThumbs.length,this.desired());this.list.collection.add(t),this.visibleThumbs=this.visibleThumbs.concat(t)}},loadMoreThumbs:function(){this.page++,this.updateVisibleThumbs()},updateButton:function(){var t=this.numPeeking()>0,e=this.visibleThumbs.length<this.count,i=l.max(0,this.visibleThumbs.length-this.desired());this.$(".col").hasClass("last-row")&&t||!t&&(e||i)?this.$el.addClass("has-more"):this.$el.removeClass("has-more")},updateLinks:function(){var t=this.list.$el.find(".outer-link"),e=this.list.$el.find(".title-link"),i=this.$(".peeking .last-row:not(.hidden)");"list-layout"===this.layoutType()?t.add(e).attr("tabindex",-1):(t.prop("tabindex",!1),e.attr("tabindex",-1)),i.find(".outer-link, .title-link").attr("tabindex",-1)},handleShowMoreAction:function(t){t.preventDefault(),this.loadMoreThumbs(),this.fit(),this.has_revealed=!0,this.$el.loadLazyImages()},handleShowMoreKeyPress:function(t){var e,i,s;"list-layout"===this.layoutType()?(i=this.list.$el.find(".item:not(.hidden)"),e="a.arrow"):(e="a.outer-link",i=this.numPeeking()>0?this.list.$el.find(".item:not(.last-row):not(.hidden)"):this.list.$el.find(".item:not(.hidden)")),s=i.last(),this.handleShowMoreAction(t),s.next().find(e).trigger("focus")},handleFilterLabelAction:function(t){t.preventDefault();var s=this.model.get("data"),n=this,r=this.model.get("config_options")||{},a=r&&r.display_movie_release_date,o=r.include_show_all_filter_label,l=r.show_all_filter_label_text,d=t.target&&t.target.innerText||"",h=d.replace(/^\s+|\s+$/g,""),u=s.filter(function(t){return h===l||t.title===h}),c=e(u),f=i(s,h,o,l);this.filter_labels=f.filter_labels,this.active_filter_title=f.active_filter_title,a&&c.forEach(function(t){n.setMovieRelease(t)}),this.renderFetchedData(c)},fit:function(){var t,e=this.desired(),i=this.numPeeking();this.updateVisibleThumbs(),t=this.list.$el.children(),t.removeClass("last-row"),e-i<this.count||!this.has_revealed?(t.removeClass("hidden").slice(e).addClass("hidden"),t.slice(e-i).addClass("last-row")):t.removeClass("hidden"),this.updateButton(),this.updateLinks()},desired:function(){return this.page*this.rows()*this.cols()+this.numPeeking()},numPeeking:function(){return this.model.get("enable_peek")&&"grid-layout"===this.layoutType()?this.cols():0},rows:function(){var t=a.Resize.width(),e=this.model.get("config_options");if(e&&e.number_of_rows_override&&"grid-layout"===this.layoutType())return e.number_of_rows_override;switch(this.entity_type){case"game":return 4;case"personality":return t<u.midLow?3:2;default:return t<u.midLow?4:2}},layoutType:function(){switch(this.entity_type){case"videocollection":return"grid-layout";default:return this.cols()>1?"grid-layout":"list-layout"}},initNativeAds:function(){var t=this.model.get("config_options");this.adPosition=1,t&&t.native_ads&&t.native_ad_placement_key&&_&&!this.options.cds&&(this.shareThrough=new _,this.shareThrough.loadScriptError||(this.shareThrough.insertModel(this.model.data,this.adPosition),this.shareThrough.scriptElem.addEventListener("scriptLoadError",function(){this.removeEmptyAdSlot()}.bind(this))))},recommenderInsertNativeAd:function(t){if(this.shareThrough){this.model.data.at(this.adPosition)&&t.splice(this.adPosition,0,{is_ad:!0})}return t},getNativeAdSlot:function(t){var e;return this.shareThrough&&this.options.ads.findSlotById&&t.length&&(e=this.options.ads.findSlotById(t.attr("id"))),e},refreshNativeAd:function(){var t=this.getNativeAdSlot(this.list.$(".gpt"));t&&t.refresh()},adListeners:function(){var t=this,e=this.getNativeAdSlot(this.list.$(".gpt"));e&&e.events.on("slotRenderEnded",function(e){e.isEmpty&&t.removeEmptyAdSlot()})},getAdPosition:function(){if(!this.options.cds)return this.options.ads&&this.options.ads.setAdPosition&&this.options.ads.setAdPosition(this.model)},removeEmptyAdSlot:function(){this.allThumbs=h.reject(this.allThumbs,function(t){return!0===t.get("is_ad")}),this.count=this.allThumbs.length,this.visibleThumbs=this.allThumbs.slice(0,this.page*this.desired()),this.list.collection.reset(this.visibleThumbs),s.LazyLoad.resetModule(this)},initRecommendations:function(){var t=this;if("recommendation"===this.entity_type){var e=h.first(this.model.get("data"));h.extend(e,{entity_overrides:{title_overlay:!1}}),t.$el.hide(),s.Recommender.getRecommendations(e).done(function(e){t.renderFetchedData(e)}).fail(function(){var e=t.model.get("data").slice(1);e.length&&t.renderFetchedData(e)})}else this.makeList(),this.adListeners()},entityResize:function(){var e=t.document.getElementsByClassName("entity-details"),i=0;e.length>0&&(h.forEach(e,function(t){var e=t.offsetHeight;e>i&&(i=e)}),h.forEach(e,function(t){t.style.height=i+"px"}))}})).register("stream",{})}(this);